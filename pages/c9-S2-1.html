<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ° C9 ì‹œì¦Œ2 Â· 1íšŒì°¨ ë‚­í”Œë‹¨</title>

<style>
body{
  background:#F4FBF7;
  font-family:"Pretendard",-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  display:flex; justify-content:center;
  padding:20px 16px; margin:0;
  color:#1f3d2b;
}

/* ìƒë‹¨ ë„¤ë¹„ ë²„íŠ¼ */
.nav-top{ display:flex; gap:8px; margin-bottom:14px; }
.nav-btn{
  padding:6px 14px;
  background:#CDEEDD;
  border:none; border-radius:999px;
  font-size:14px; color:#1f5c3b;
  cursor:pointer; font-weight:700;
}
.nav-btn:hover{ background:#B6E5CE; }

.wrap{ width:100%; max-width:1080px; margin:0 auto; }

h1{
  text-align:center;
  font-size:22px; font-weight:900;
  margin:6px 0 12px;
  color:#2E8B57;
}

.small-note{
  text-align:center;
  font-size:12px;
  color:#3c7a57;
  margin:-6px 0 12px;
}

/* ê²€ìƒ‰ ë°” */
.filter-bar{
  display:flex; justify-content:center; gap:8px;
  margin-bottom:12px; font-size:13px;
}
.filter-bar input{
  flex:1; max-width:280px;
  padding:7px 12px;
  border-radius:999px;
  border:1px solid #B6E2C8;
  background:#FFFFFF;
  outline:none;
}
.filter-bar input:focus{
  border-color:#2E8B57;
  box-shadow:0 0 0 2px rgba(46,139,87,0.18);
}

.table-scroll{ overflow-x:auto; padding-bottom:4px; }
.table{
  display:flex; flex-direction:column; gap:4px;
  min-width:980px;
}
.row{
  display:flex;
  background:white;
  border-radius:24px;
  overflow:hidden;
  box-shadow:0 1px 4px rgba(46,139,87,0.12);
  padding:2px 0;
  transition:box-shadow 0.15s ease, transform 0.15s ease;
}
.data-row:hover{
  box-shadow:0 3px 10px rgba(46,139,87,0.18);
  transform:translateY(-1px);
}
.cell{
  padding:4px 8px;
  font-size:14px;
  display:inline-flex;
  justify-content:center;
  align-items:center;
  text-align:center;
  border-right:1px solid #DFF1E8;
  outline:none;
  cursor:text;
  white-space:normal;
  word-break:keep-all;
}
.cell:last-child{ border-right:none; }

.header{ background:#DDF4EA; }
.header .cell{
  font-weight:800;
  color:#1f5c3b;
  border-bottom:2px solid #B6E2C8;
  cursor:default;
}

.summary-row{
  background:#F1FBF6;
  font-weight:800;
  color:#1f5c3b;
}

/* ì—´ ë„ˆë¹„ (6ì—´ + ë²„íŠ¼ = 7ì—´) */
.row .cell:nth-child(1){ width:140px; } /* ì•„ì´ë”” */
.row .cell:nth-child(2){ width:140px; } /* ë‹‰ë„¤ì„ */
.row .cell:nth-child(3){ width:90px;  } /* ë‚­í”Œ */
.row .cell:nth-child(4){ width:90px;  } /* ì›í”Œì› */
.row .cell:nth-child(5){ width:90px;  } /* ì´ë²¤íŠ¸ */
.row .cell:nth-child(6){ width:500px; } /* ê³µì•½ */
.row .cell:nth-child(7){ width:80px;  } /* ë²„íŠ¼ */

.action-cell{ position:relative; border-right:none; }
.action-buttons{
  display:none; gap:4px;
  position:absolute; right:4px; top:50%;
  transform:translateY(-50%);
}
.action-buttons button{
  background:#CDEEDD;
  border:none; border-radius:999px;
  padding:3px 7px;
  font-size:11px;
  cursor:pointer;
  color:#1f5c3b;
  transition:background 0.15s ease, transform 0.15s ease;
}
.action-buttons button:hover{
  background:#B6E5CE;
  transform:translateY(-1px);
}
.row.show-actions .action-buttons{ display:flex; }

/* ìƒ‰ìƒ ë‹¨ê³„ (ì´ˆë¡ íŒŒìŠ¤í…”) */
:root{
  --lv0:#FFFFFF;
  --lv1:#F1FBF6; /* 100~298 */
  --lv2:#E6F7EE; /* 299~999 */
  --lv3:#DDF4EA; /* 1000~2999 */
  --lv4:#CDEEDD; /* 3000~4999 */
  --lv5:#BDE7D0; /* 5000~9999 */
  --lv6:#AEE0C4; /* 10000~49999 */
  --lv7:#9AD8B7; /* 50000~100000 */
  --lv8:#7CCEA4; /* 100000~299999 */
  --lv9:#2E8B57; /* 300000~ */
}
</style>
</head>

<body>
<div class="wrap">

  <div class="nav-top">
    <button onclick="location.href='../index.html'" class="nav-btn">ğŸ  í™ˆ</button>
    <button onclick="history.back()" class="nav-btn">â—€ ì´ì „</button>
  </div>

  <h1>ğŸ° C9 ì‹œì¦Œ2 Â· 1íšŒì°¨ ë‚­í”Œë‹¨</h1>
  <div class="small-note">
    â€» ì†ŒìŒë‹¨ ê³µì•½ ì •ë¦¬: <b>299 ~ 999 â†’ 3ë§Œì› ê³µì•½</b> / <b>100 ~ 298 â†’ 1ë§Œì› ê³µì•½</b>
  </div>

  <div class="filter-bar">
    <input id="search" type="text" placeholder="ì•„ì´ë”” / ë‹‰ë„¤ì„ ê²€ìƒ‰">
  </div>

  <div class="table-scroll">
    <div class="table" id="table">

      <div class="row header">
        <div class="cell">ì•„ì´ë””</div>
        <div class="cell">ë‹‰ë„¤ì„</div>
        <div class="cell">ë‚­í”Œ</div>
        <div class="cell">ì›í”Œì›</div>
        <div class="cell">ì´ë²¤íŠ¸</div>
        <div class="cell">ê³µì•½</div>
        <div class="cell action-cell"></div>
      </div>

      <!-- ====== S2-1 ë°ì´í„° ====== -->

      <div class="row data-row">
        <div class="cell" contenteditable="true">poksavi2</div>
        <div class="cell" contenteditable="true">ì‹œë˜</div>
        <div class="cell nang-cell" contenteditable="true">60957</div>
        <div class="cell one-cell" contenteditable="true">15151</div>
        <div class="cell event-cell" contenteditable="true">18176</div>
        <div class="cell pledge-cell" contenteditable="true">ì¹´í†¡ + ì—­íŒ¬ 3% + ì •ì„±ë°©ì…€ + ì†Œì†Œí•œì„ ë¬¼</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">kobongkobong</div>
        <div class="cell" contenteditable="true">Summer.G</div>
        <div class="cell nang-cell" contenteditable="true">33000</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì¡±ë²„ì§€ì˜ ì€í˜œ....</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">wjddudtjr777</div>
        <div class="cell" contenteditable="true">ë‚­ë¬´ìƒˆ</div>
        <div class="cell nang-cell" contenteditable="true">11111</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true">11000</div>
        <div class="cell pledge-cell" contenteditable="true">ì¹´í†¡ + ì—­íŒ¬ 3% + ì •ì„±ë°©ì…€ or ì›í•˜ëŠ” ì§ì›ê³¼ ë°©ì…€(ëŒ€í‘œë‹˜ í¬í•¨)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">yurinezip</div>
        <div class="cell" contenteditable="true">í—ˆêµ°+</div>
        <div class="cell nang-cell" contenteditable="true">9999</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì¹´í†¡ + ì—­íŒ¬ 3% + ì •ì„±ë°©ì…€ or ì›í•˜ëŠ” ì§ì›ê³¼ ë°©ì…€(ëŒ€í‘œë‹˜ í¬í•¨)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">doco100</div>
        <div class="cell" contenteditable="true">ë´‰ë‹¤ë¦¬#</div>
        <div class="cell nang-cell" contenteditable="true">5069</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true">5069</div>
        <div class="cell pledge-cell" contenteditable="true">ì¹´í†¡ + ì—­íŒ¬ 3% + ì •ì„±ë°©ì…€ or ì›í•˜ëŠ” ì§ì›ê³¼ ë°©ì…€(ëŒ€í‘œë‹˜ í¬í•¨)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">hamjacingu</div>
        <div class="cell" contenteditable="true">[C9]5ìˆ˜ìƒ</div>
        <div class="cell nang-cell" contenteditable="true">5050</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true">5050</div>
        <div class="cell pledge-cell" contenteditable="true">ì¹´í†¡ + ì—­íŒ¬ 3% + ì •ì„±ë°©ì…€ or ì›í•˜ëŠ” ì§ì›ê³¼ ë°©ì…€(ëŒ€í‘œë‹˜ í¬í•¨)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">dumbo0131</div>
        <div class="cell" contenteditable="true">ë‹¹êµ°+</div>
        <div class="cell nang-cell" contenteditable="true">5800</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬3% + ë°©ì…€ (ì‚¬ì§„ 2ì¥, ì›€ì§¤ 1ì¥)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">gjckdtlr1744</div>
        <div class="cell" contenteditable="true">ì–¼ë¹µì–¼ë¹µì–¼ë¹µ</div>
        <div class="cell nang-cell" contenteditable="true">4225</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬3% + ë°©ì…€ (ì‚¬ì§„ 2ì¥)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">nrladhksrb96</div>
        <div class="cell" contenteditable="true">ë¼ë Œì´</div>
        <div class="cell nang-cell" contenteditable="true">3027</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬3% + ë°©ì…€ (ì‚¬ì§„ 2ì¥)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">s2000kr</div>
        <div class="cell" contenteditable="true">ë¬´ìˆ˜ë•¡í</div>
        <div class="cell nang-cell" contenteditable="true">3000</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬3% + ë°©ì…€ (ì‚¬ì§„ 2ì¥)</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">imarrymei</div>
        <div class="cell" contenteditable="true">í’ì˜ê³ ë§í•´ìš”</div>
        <div class="cell nang-cell" contenteditable="true">1510</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬ 3% + ê³ ì • ì‚¬ì§„ ë°©ì…€</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">scatme</div>
        <div class="cell" contenteditable="true">ë„ì™€ì•™</div>
        <div class="cell nang-cell" contenteditable="true">1510</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬ 3% + ê³ ì • ì‚¬ì§„ ë°©ì…€</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">kkkk1668</div>
        <div class="cell" contenteditable="true">kkkk1668</div>
        <div class="cell nang-cell" contenteditable="true">1225</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬ 3% + ê³ ì • ì‚¬ì§„ ë°©ì…€</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">sdroxbnq63</div>
        <div class="cell" contenteditable="true">[C9]ì°¸ì¹˜ë§ˆìš”</div>
        <div class="cell nang-cell" contenteditable="true">1009</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬ 3% + ê³ ì • ì‚¬ì§„ ë°©ì…€</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <div class="row data-row">
        <div class="cell" contenteditable="true">yh0242yh</div>
        <div class="cell" contenteditable="true">ì˜¤ëŠ˜ì€ììš”</div>
        <div class="cell nang-cell" contenteditable="true">1000</div>
        <div class="cell one-cell" contenteditable="true"></div>
        <div class="cell event-cell" contenteditable="true"></div>
        <div class="cell pledge-cell" contenteditable="true">ì—­íŒ¬ 3% + ê³ ì • ì‚¬ì§„ ë°©ì…€</div>
        <div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div>
      </div>

      <!-- ì†ŒìŒë‹¨(ì§ì ‘ ì…ë ¥/ìˆ˜ì •) -->
      <div class="row data-row"><div class="cell" contenteditable="true">dydwns951107</div><div class="cell" contenteditable="true">ì“°ì“°__</div><div class="cell nang-cell" contenteditable="true">299</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (299~999 â†’ 3ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">moxxg22</div><div class="cell" contenteditable="true">[C9]ì² ë•Œì§€</div><div class="cell nang-cell" contenteditable="true">218</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">k203gon</div><div class="cell" contenteditable="true">ì°½Bong</div><div class="cell nang-cell" contenteditable="true">109</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">qwe3186</div><div class="cell" contenteditable="true">[C9]â˜†TOP</div><div class="cell nang-cell" contenteditable="true">109</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">jjang4279</div><div class="cell" contenteditable="true">íŒ¥ë¸…ì£ ì•„</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">imposter112</div><div class="cell" contenteditable="true">ì±„ì‹œí˜„ì˜íƒ±í¬</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">zlzldydtk</div><div class="cell" contenteditable="true">ì§€ìœ ì˜ì˜¤ë¥¸íŒ”</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">krhtlgh123</div><div class="cell" contenteditable="true">ì¡±êµ¬369</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">mfc0326</div><div class="cell" contenteditable="true">ë¹µë¹¡ì´2â†‘</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">kimsumgk77</div><div class="cell" contenteditable="true">ë¬´ìƒë„</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">slionics</div><div class="cell" contenteditable="true">â˜†íŒ¨ì…˜â˜†</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>
      <div class="row data-row"><div class="cell" contenteditable="true">qkrwhdtj2003</div><div class="cell" contenteditable="true">[C9]í—ˆë‹¹ë°•</div><div class="cell nang-cell" contenteditable="true">100</div><div class="cell one-cell" contenteditable="true"></div><div class="cell event-cell" contenteditable="true"></div><div class="cell pledge-cell" contenteditable="true">ì†ŒìŒë‹¨ (100~298 â†’ 1ë§Œì› ê³µì•½)</div><div class="cell action-cell"><div class="action-buttons"><button class="add">+</button><button class="del">ğŸ—‘</button></div></div></div>

      <!-- í•©ê³„ -->
      <div class="row summary-row">
        <div class="cell">í•©ê³„</div>
        <div class="cell summary-count"></div>
        <div class="cell summary-nang"></div>
        <div class="cell summary-one"></div>
        <div class="cell summary-event"></div>
        <div class="cell summary-total"></div>
        <div class="cell"></div>
      </div>

    </div>
  </div>
</div>

<script>
function getNumber(v){
  return parseInt(String(v ?? "").replace(/[^0-9]/g,"")) || 0;
}

function rowTotal(row){
  const n = getNumber(row.querySelector(".nang-cell")?.innerText);
  const o = getNumber(row.querySelector(".one-cell")?.innerText);
  const e = getNumber(row.querySelector(".event-cell")?.innerText);
  return { n, o, e, t:(n+o+e) };
}

/* í–‰ ìƒ‰ìƒ: ì´í•© ê¸°ì¤€ */
function applyRowStyle(row){
  const { t } = rowTotal(row);

  let lv="--lv0";
  if(t>=100 && t<=298) lv="--lv1";
  else if(t<=999) lv="--lv2";
  else if(t<=2999) lv="--lv3";
  else if(t<=4999) lv="--lv4";
  else if(t<=9999) lv="--lv5";
  else if(t<=49999) lv="--lv6";
  else if(t<=100000) lv="--lv7";
  else if(t<=299999) lv="--lv8";
  else if(t>=300000) lv="--lv9";

  row.style.background = `var(${lv})`;
}

/* í•©ê³„ (ìš”ì²­: ë‚­í”Œ + ì›í”Œì› = í‘œì‹œ) */
function updateSummary(){
  let sumN=0, sumO=0, sumE=0, cnt=0;

  document.querySelectorAll(".data-row").forEach(row=>{
    const { n,o,e } = rowTotal(row);
    sumN += n; sumO += o; sumE += e; cnt += 1;
  });

  document.querySelector(".summary-count").innerText = cnt + "ëª…";
  document.querySelector(".summary-nang").innerText = sumN.toLocaleString();
  document.querySelector(".summary-one").innerText = sumO ? sumO.toLocaleString() : "";
  document.querySelector(".summary-event").innerText = sumE ? sumE.toLocaleString() : "";
  document.querySelector(".summary-total").innerText = "ë‚­í”Œ + ì›í”Œì› = " + (sumN + sumO).toLocaleString();
}

/* ì •ë ¬: ì´í•©(ë‚­í”Œ+ì›í”Œì›+ì´ë²¤íŠ¸) ë‚´ë¦¼ì°¨ìˆœ */
function sortRows(){
  const table = document.getElementById("table");
  const summary = document.querySelector(".summary-row");
  const rows = Array.from(document.querySelectorAll(".data-row"));

  rows.sort((a,b)=> rowTotal(b).t - rowTotal(a).t);
  rows.forEach(r => table.insertBefore(r, summary));
}

function refreshAll(){
  document.querySelectorAll(".data-row").forEach(row=> applyRowStyle(row));
  sortRows();
  updateSummary();
}

/* ë²„íŠ¼ í‘œì‹œ */
document.addEventListener("click",(e)=>{
  const clickedRow = e.target.closest(".data-row");
  document.querySelectorAll(".data-row").forEach(r=>r.classList.remove("show-actions"));
  if(clickedRow) clickedRow.classList.add("show-actions");
});

/* í–‰ ì¶”ê°€/ì‚­ì œ */
function addRow(after){
  const newRow = after.cloneNode(true);
  newRow.querySelectorAll(".cell").forEach(c=>{
    if(c.classList.contains("action-cell")) return;
    c.innerText = "";
  });
  after.insertAdjacentElement("afterend", newRow);
  refreshAll();
}
function deleteRow(row){
  if(document.querySelectorAll(".data-row").length <= 1){
    alert("ë§ˆì§€ë§‰ í–‰ì€ ì‚­ì œê°€ ë¶ˆê°€í•©ë‹ˆë‹¤.");
    return;
  }
  row.remove();
  refreshAll();
}
document.addEventListener("click",(e)=>{
  if(e.target.classList.contains("add")) addRow(e.target.closest(".data-row"));
  if(e.target.classList.contains("del")) deleteRow(e.target.closest(".data-row"));
});

/* ê²€ìƒ‰ */
document.getElementById("search").addEventListener("input", e=>{
  const q = e.target.value.toLowerCase();
  document.querySelectorAll(".data-row").forEach(row=>{
    const id = (row.children[0].innerText||"").toLowerCase();
    const nick = (row.children[1].innerText||"").toLowerCase();
    row.style.display = (!q || id.includes(q) || nick.includes(q)) ? "flex" : "none";
  });
});

/* ì…ë ¥ ì‹œ ê°±ì‹  */
document.addEventListener("input", ()=> refreshAll());
window.onload = refreshAll;
</script>

</body>
</html>
