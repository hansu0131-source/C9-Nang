<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ° C9 1íšŒì°¨ ë‚­í”Œë‹¨</title>

<style>
/* === ì „ì²´ ë°°ê²½ === */
body {
    background: #FFF6FA;
    font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    display: flex;
    justify-content: center;
    padding: 20px 16px;
    color: #4c2d3b;
    margin: 0;
}

/* === ì»¨í…Œì´ë„ˆ === */
.wrap {
    width: 100%;
    margin: 0 auto;
}

/* === ì œëª© === */
h1 {
    text-align: center;
    font-size: 22px;
    font-weight: 800;
    margin-bottom: 20px;
    color: #FF8FB2;
}

/* === ê°€ë¡œ ìŠ¤í¬ë¡¤ ì˜ì—­ === */
.table-scroll {
    overflow-x: auto;
    padding-bottom: 6px;
}

/* === í…Œì´ë¸” êµ¬ì¡° === */
.table {
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-width: 650px;
}

/* === í–‰ === */
.row {
    display: flex;
    background: white;
    border-radius: 26px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(255,150,180,0.08);
    padding: 4px 0;
}

/* === ì…€ === */
.cell {
    padding: 8px 12px;
    font-size: 14px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    border-right: 1px solid #FFE1EF;
    outline: none;
    cursor: text;
    white-space: nowrap;
}

.cell:last-child {
    border-right: none;
}

/* === í—¤ë” (ì—°í•œí†¤) === */
.header {
    background: #FFEFF7;
}

.header .cell {
    font-weight: 700;
    color: #D04F7D;
    border-bottom: 2px solid #F8C7DB;
    contenteditable: false;
}

/* === ê°¯ìˆ˜ ìƒ‰ìƒ ë ˆë²¨ (ì—°í•œ ë²„ì „) === */
:root {
    --lv0: #FFFFFF;
    --lv1: #FFF9FD;
    --lv2: #FFF3FA;
    --lv3: #FFE9F4;
    --lv4: #FFE0EF;
    --lv5: #FFD7EB;
    --lv6: #FFCEE7;
    --lv7: #FFC6E3;
    --lv8: #FFBEDF;
    --lv9: #FFB6DA;
}

</style>
</head>

<body>
<div class="wrap">

<h1>ğŸ° C9 1íšŒì°¨ ë‚­í”Œë‹¨</h1>

<div class="table-scroll">
    <div class="table" id="table">

        <!-- í—¤ë” -->
        <div class="row header">
            <div class="cell">ì•„ì´ë””</div>
            <div class="cell">ë‹‰ë„¤ì„</div>
            <div class="cell">ê°¯ìˆ˜</div>
            <div class="cell">ì›í”Œì›</div>
            <div class="cell">ê³µì•½</div>
            <div class="cell">ì—­íŒ¬</div>
            <div class="cell">ë¹„ê³ </div>
        </div>

        <!-- ìƒ˜í”Œ -->
        <div class="row data-row">
            <div class="cell" contenteditable="true">danggun</div>
            <div class="cell" contenteditable="true">ë‹¹êµ°</div>
            <div class="cell amount-cell" contenteditable="true">30000</div>
            <div class="cell" contenteditable="true">1</div>
            <div class="cell" contenteditable="true">ì¶œì„</div>
            <div class="cell ygp-cell" contenteditable="true"></div>
            <div class="cell" contenteditable="true">VIP</div>
        </div>

    </div>
</div>

</div>

<script>

/* ----------------------------------
   1) ê°¯ìˆ˜ ìˆ«ì â†’ ìƒ‰ìƒ & ì—­íŒ¬ ìë™ ì²˜ë¦¬
---------------------------------- */
function applyRowStyle(row) {
    const amountCell = row.querySelector(".amount-cell");
    const ygpCell    = row.querySelector(".ygp-cell");
    if (!amountCell || !ygpCell) return;

    const num = parseInt(amountCell.innerText.replace(/[^0-9]/g, ""), 10) || 0;

    ygpCell.innerText = num > 0 ? Math.round(num * 0.03) : "";

    let levelVar = "--lv0";
    if (num >= 100 && num <= 298) levelVar = "--lv1";
    else if (num <= 999) levelVar = "--lv2";
    else if (num <= 2999) levelVar = "--lv3";
    else if (num <= 4999) levelVar = "--lv4";
    else if (num <= 9999) levelVar = "--lv5";
    else if (num <= 49999) levelVar = "--lv6";
    else if (num <= 99999) levelVar = "--lv7";
    else if (num <= 299999) levelVar = "--lv8";
    else if (num >= 300000) levelVar = "--lv9";

    row.style.background = `var(${levelVar})`;
}

function refreshAll() {
    document.querySelectorAll(".data-row").forEach(applyRowStyle);
}


/* ----------------------------------
   2) ì—´ ë„ˆë¹„ ìë™ë™ê¸°í™” (í•µì‹¬)
---------------------------------- */
function syncColumnWidths() {
    const rows = [...document.querySelectorAll(".row")];
    if (rows.length < 2) return;

    const colsCount = rows[0].children.length;
    let colWidths = Array(colsCount).fill(0);

    rows.forEach(row => {
        [...row.children].forEach((cell, i) => {
            colWidths[i] = Math.max(colWidths[i], cell.scrollWidth);
        });
    });

    rows.forEach(row => {
        [...row.children].forEach((cell, i) => {
            cell.style.width = colWidths[i] + "px";
        });
    });
}


/* ----------------------------------
   3) ë°°ê²½ í´ë¦­ ì‹œ í‚¤ë³´ë“œ ë‹«ê¸°
---------------------------------- */
document.addEventListener("click", (e)=>{
    const isCell = e.target.closest(".cell");
    if (!isCell) {
        const active = document.activeElement;
        if (active && active.classList.contains("cell")) {
            active.blur();
        }
    }
});


/* ----------------------------------
   4) ì´ë²¤íŠ¸ ë°”ì¸ë”©
---------------------------------- */
document.addEventListener("input", ()=>{
    refreshAll();
    syncColumnWidths();
});

window.onload = ()=>{
    refreshAll();
    syncColumnWidths();
};

</script>

</body>
</html>
